{% extends 'base.html' %}
{% block header %}Cart{% endblock %}
{% block content %}
<table id="t01">
  <tr>      
    <th>Final Amount</th>
    <th>Number</th>
    <th>price</th>
    <th>title</th>
    <th>photo</th>
    <th></th>
  </tr>
  {% set total = [] %}
  {% for i,a in zip(p,c) %}
  <tr>
    <td>
      {% if not i.discounted %}
      {% set amount =  a.number * i.price %}
      {% else %}
      {% set amount =  a.number * i.discounted %}      
      {% endif %}  
      ${{ amount }}
    </td>
    <td>
      <a href="{{url_for('reduce_num', id=i.id)}}" class="btn btn-primary" >-</a>
      {{ a.number }}
      <a href="{{url_for('add_num', id=i.id)}}" class="btn btn-primary" >+</a>
    </td>
    {% if not i.discounted %}
    <td>${{i.price}}</td>
    {% else %}
    <td>${{ i.discounted}}</td>
    {% endif %}  
    <td>{{i.title}}</td>
    <td>
      <img class="card-img-top" src="{{i.photo}}" style="width: 80px; height: 80px;"> 
    </td>
    <td>
      <a name='delete' href="{{url_for('delete_cart', id=i.id)}}" >
        <i class="material-icons" style="color:red">remove_circle</i></a>
    </td>
    {% set _ = total.append(amount) %}
    {% endfor %}
  </tr>
</table>
<a style="color: aliceblue;" class="btn btn-danger" > <b>Total Amount : ${{ total | sum()}}</b></a>
<a href="{{url_for('final_amount')}}" class="btn btn-success" >تسویه حساب</a>

<br>
<br>
{% endblock %}