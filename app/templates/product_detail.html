{% extends 'base.html' %}
{% block content %}
<body>
  <main class="container">
    <!-- right Column / Image and gallery -->
    <div class="left-column">
      <div class="container1">
        <!-- main image -->
        <div class="hover01 column" >
          <div >
            <figure>
              <img src="{{product.photo}}" class="product-main-img" id="expandedImg">
            </figure>
          </div>
        </div>
      </div>
      <div class="gallery-container">
      <img src="{{product.photo}}" class="gallery-images" onclick="myFunction(this);">
      {% for i in gallery %}
      {% if i.p_id == product.id %}
      <img src="{{i.pics}}" class="gallery-images" onclick="myFunction(this);">
      {% endif %}
      {% endfor %}
      </div>
    </div>
    </div>
    <!-- left Column -->
    <div class="right-column">
      <div class="product-description">
        <h1>{{product.title}}</h1>
        <p>دسته بندی: {{category.name}}</p>
        <p>موجودی : {{product.inventory}} عدد</p>
        <p> امتیاز محصول : {{product.rate}} امتیاز</p>
        <!-- product rate icons -->
      <p>به این محصول امتیاز دهید:</p>
        <a href="{{ url_for('reduce_rate', id=product.id) }}">
        <span style="font-size: 20px;"class="material-icons">&#xe8db;</span></a>
        <a href="{{ url_for('add_rate', id=product.id) }}">
        <span style="font-size: 20px;"class="material-icons">&#xe8dc;</span></a>
        <!-- short description -->
        <p>{{product.short_desc}}</p>
      </div>
      <!-- Product Pricing -->
      <div class="product-price">
        {% if product.inventory == 0 %}
        <span style="color:red;">موجود نیست</span>
        {% else %}
        {% if product.discounted %}
        <span><b><del>{{'{0:,}'.format(product.price | int)}} تومان</del></b></span>
        &nbsp; &nbsp;
        <span><b>{{'{0:,}'.format(product.discounted | int)}} تومان</b></span>
        {% else %}
        <span><b>{{'{0:,}'.format(product.price | int)}} تومان</b></span>
        {% endif %}
        {% endif %}
        &nbsp; &nbsp;
        &nbsp; &nbsp;
        {% if current_user.is_authenticated %}
        {% if product.inventory != 0 %}
        <form action="{{ url_for('cart', id=product.id) }}" method="POST">
          <input style="width: 70px;padding: 5px;border-radius: 5px;font-size: 16px;direction: ltr;border:1px solid #63636385" type="number" min="1" max={{product.inventory}} value="1" name="number">
          <input class="btn btn-primary" type="submit" value="افزودن به سبدخرید">
        </form>
        {% endif %}
        <p></p>
        {% else %}
        <a href="{{url_for('cart', id=product.id)}}"class="btn btn-primary">افزودن به سبد خرید</a>
        {%endif%}
      </div>
      <hr>
      <!-- long description -->
      <p style="color: rgb(92, 92, 92);">{{product.desc}}</p>
      </div>
    </main>
  <script>
    function myFunction(imgs) {
    var expandImg = document.getElementById("expandedImg");
    expandImg.src = imgs.src;
    expandImg.parentElement.style.display = "block";
    }
  </script>
  {% endblock %}
</body>
